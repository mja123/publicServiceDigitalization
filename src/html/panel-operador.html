<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Operador - Gestión de Poda</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="navbar-container"></div>

    <main class="operador-container">
        <!-- Encabezado y filtros -->
        <section class="operador-header">
            <h1><i class="fas fa-tasks"></i> Panel de Gestión de Solicitudes</h1>
            
            <div class="filtros">
                <div class="filtro-group">
                    <label for="filtro-estado"><i class="fas fa-filter"></i> Estado:</label>
                    <select id="filtro-estado">
                        <option value="todas">Todas las solicitudes</option>
                        <option value="pendiente">Pendientes</option>
                        <option value="aprobada">Aprobadas</option>
                        <option value="rechazada">Rechazadas</option>
                    </select>
                </div>
                
                <div class="filtro-group">
                    <label for="busqueda"><i class="fas fa-search"></i> Buscar:</label>
                    <input type="text" id="busqueda" placeholder="ID, DNI o dirección">
                </div>
            </div>
        </section>

        <!-- Listado de solicitudes -->
        <section class="solicitudes-grid">
            <!-- Tarjeta de solicitud ejemplo -->
            <article class="solicitud-card prioridad-alta">
                <div class="solicitud-header">
                    <span class="solicitud-id">#PODA-0248</span>
                    <span class="solicitud-prioridad"><i class="fas fa-exclamation-triangle"></i> Alta</span>
                </div>
                
                <div class="solicitud-body">
                    <p class="solicitud-direccion"><i class="fas fa-map-marker-alt"></i> Av. San Martín 1234</p>
                    <p class="solicitud-solicitante"><i class="fas fa-user"></i> María González (DNI 30.456.789)</p>
                    <p class="solicitud-estado estado-pendiente"><i class="fas fa-clock"></i> Pendiente</p>
                </div>

                <div class="solicitud-acciones">
                    <button class="btn-detalle" onclick="mostrarDetalleSolicitud('PODA-0248')">
                        <i class="fas fa-search"></i> Ver detalles
                    </button>
                </div>
            </article>

            <!-- Más tarjetas de solicitud... -->
        </section>
    </main>

    <!-- Modal de detalle de solicitud -->
    <div class="modal-operador" id="modalDetalle">
        <div class="modal-contenido">
            <div class="modal-header">
                <h2>Solicitud #PODA-0248</h2>
                <button class="btn-cerrar" onclick="cerrarModal()">&times;</button>
            </div>

            <div class="modal-body">
                <!-- Sección de información básica -->
                <div class="info-section">
                    <h3><i class="fas fa-info-circle"></i> Información Básica</h3>
                    <div class="info-grid">
                        <div>
                            <p><strong>Solicitante:</strong> María González</p>
                            <p><strong>DNI:</strong> 30.456.789</p>
                        </div>
                        <div>
                            <p><strong>Fecha solicitud:</strong> 15/03/2024</p>
                            <p><strong>Teléfono:</strong> +54 261 456-7890</p>
                        </div>
                    </div>
                </div>

                <!-- Sección de ubicación -->
                <div class="info-section">
                    <h3><i class="fas fa-map-marked-alt"></i> Ubicación</h3>
                    <div class="mapa-placeholder">
                        <p>Coordenadas: -32.8848, -68.8452</p>
                        <!-- Aquí iría un mapa integrado -->
                    </div>
                </div>

                <!-- Sección de imágenes -->
                <div class="info-section">
                    <h3><i class="fas fa-images"></i> Evidencia Fotográfica</h3>
                    <div class="galeria-imagenes">
                        <div class="imagen-item">
                            <img src="../assets/placeholder-tree.jpg" alt="Foto del árbol">
                        </div>
                    </div>
                </div>

                <!-- Sección de acciones -->
                <div class="acciones-section">
                    <div class="acciones-group">
                        <button class="btn-rechazar" onclick="rechazarSolicitud()">
                            <i class="fas fa-times-circle"></i> Rechazar
                        </button>
                        <button class="btn-aprobar" onclick="aprobarSolicitud()">
                            <i class="fas fa-check-circle"></i> Aprobar
                        </button>
                    </div>

                    <div class="asignacion-section">
                        <label for="asignar-a"><i class="fas fa-users-cog"></i> Asignar a:</label>
                        <select id="asignar-a">
                            <option value="cuadrilla1">Cuadrilla Zona Norte</option>
                            <option value="cuadrilla2">Cuadrilla Zona Sur</option>
                            <option value="jefe">Jefe de Limpieza</option>
                        </select>
                        
                        <button class="btn-asignar" onclick="asignarTarea()">
                            <i class="fas fa-paper-plane"></i> Asignar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Acciones Rápidas</h3>
                <a href="#"><i class="fas fa-plus-circle"></i> Nueva Solicitud</a>
                <a href="#"><i class="fas fa-history"></i> Historial</a>
            </div>
            <div class="footer-section">
                <h3>Soporte</h3>
                <p><i class="fas fa-phone"></i> 0261-1234567 Int. 456</p>
                <p><i class="fas fa-envelope"></i> soporte-poda@guaymallen.gob.ar</p>
            </div>
        </div>
    </footer>

    <script>
        // Función para cargar navbar
        fetch("navbar.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("navbar-container").innerHTML = data;
            });

        // Funcionalidad del modal
        function mostrarDetalleSolicitud(id) {
            document.getElementById('modalDetalle').style.display = 'block';
        }

        function cerrarModal() {
            document.getElementById('modalDetalle').style.display = 'none';
        }

        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            const modal = document.getElementById('modalDetalle');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Funciones de acción (placeholder)
        function aprobarSolicitud() {
            alert('Solicitud aprobada y asignada');
            cerrarModal();
        }

        function rechazarSolicitud() {
            const motivo = prompt('Ingrese el motivo de rechazo:');
            if (motivo) {
                alert(`Solicitud rechazada. Motivo: ${motivo}`);
                cerrarModal();
            }
        }

        function asignarTarea() {
            const asignacion = document.getElementById('asignar-a').value;
            alert(`Tarea asignada a: ${asignacion}`);
        }
    </script>
</body>
</html>